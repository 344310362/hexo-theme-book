
<% if (site.posts.length > 0) { %>
  <div class="recent-posts">
    <h6>Recent Posts</h6>
    
    <div class="timeline">
    <%
        var months = {};
        site.posts.sort('date').reverse().limit(15).each(post => {
            var month = date(post.date, 'YYYY-MM');
            if(months[month] === undefined){
                months[month] = [];
            }
            months[month].push(post);
        });
    %>

    <% Object.keys(months).forEach(month => { %>
        <div class="recent-posts-item">
          <div class="recent-posts-left">
            <a class="recent-posts-month"></a>
          </div>
          <div class="recent-posts-content">
            <h6><%= date(month, 'MMMM YYYY') %></h6>
            <% months[month].map(function(post){  %>
              <div>
                <a href="<%- config.root %><%- post.path %>"><%- post.title || "Untitled" %></a>
              </div>
            <% }) %>
          </div>
        </div>
    <% }) %>
    </div>
  </div>
<% } %>
